<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.3">
<title>ruvpy.helpers API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>ruvpy.helpers</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="ruvpy.helpers.ecdf"><code class="name flex">
<span>def <span class="ident">ecdf</span></span>(<span>ens: numpy.ndarray, thresholds: numpy.ndarray) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"><p>Return exceedance probabilities for the supplied thresholds.</p>
<p>This implementation is up to five times faster than <code>statsmodels</code>' ECDF.</p></div>
</dd>
<dt id="ruvpy.helpers.generate_event_freq_ref"><code class="name flex">
<span>def <span class="ident">generate_event_freq_ref</span></span>(<span>obs: numpy.ndarray) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"><p>Create an event-frequency reference ensemble from observations.</p>
<p>This reproduces the event-frequency reference used in REV by treating
the observation record as an ensemble for each timestep. Missing values
are removed before tiling the observations along the time dimension to
simplify the calculation of forecast likelihoods.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>obs</code></strong></dt>
<dd>Array of observations.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>2D array where each row contains the non-missing observations.</p></div>
</dd>
<dt id="ruvpy.helpers.is_deterministic"><code class="name flex">
<span>def <span class="ident">is_deterministic</span></span>(<span>series) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Return <code>True</code> if the series represents a deterministic forecast.</p></div>
</dd>
<dt id="ruvpy.helpers.nanmode"><code class="name flex">
<span>def <span class="ident">nanmode</span></span>(<span>data, axis=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Return the mode while ignoring <code>NaN</code> values.</p></div>
</dd>
<dt id="ruvpy.helpers.prob_premium_to_risk_aversion_coef"><code class="name flex">
<span>def <span class="ident">prob_premium_to_risk_aversion_coef</span></span>(<span>risk_premium_prob: float, gamble_size: float) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Convert a probability premium to a CARA risk-aversion coefficient.</p>
<p>Calculation follows Babcock (1993, Eq. 4 and 9).</p></div>
</dd>
<dt id="ruvpy.helpers.probabilistic_to_deterministic_forecast"><code class="name flex">
<span>def <span class="ident">probabilistic_to_deterministic_forecast</span></span>(<span>ensembles: numpy.ndarray, crit_thres: float) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"><p>Convert an ensemble forecast to a deterministic one.</p>
<p>The conversion selects the value corresponding to <code>crit_thres</code> of the
exceedance distribution for each timestep.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>ensembles</code></strong></dt>
<dd>Array of ensemble forecasts with shape <code>(n_times, n_members)</code>.</dd>
<dt><strong><code>crit_thres</code></strong></dt>
<dd>Critical probability threshold used to select the
deterministic value.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Array of deterministic forecasts for each timestep.</p></div>
</dd>
<dt id="ruvpy.helpers.risk_aversion_coef_to_risk_premium"><code class="name flex">
<span>def <span class="ident">risk_aversion_coef_to_risk_premium</span></span>(<span>risk_aversion: float, gamble_size: float) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Convert a CARA risk-aversion coefficient to a risk premium.</p>
<p>Calculation follows Babcock (1993, Eq. 4).</p></div>
</dd>
<dt id="ruvpy.helpers.risk_premium_to_prob_premium"><code class="name flex">
<span>def <span class="ident">risk_premium_to_prob_premium</span></span>(<span>risk_premium: float) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Convert a risk premium to the corresponding probability premium.</p>
<p>Calculation follows Babcock (1993, Eq. 9).</p></div>
</dd>
<dt id="ruvpy.helpers.risk_premium_to_risk_aversion_coef"><code class="name flex">
<span>def <span class="ident">risk_premium_to_risk_aversion_coef</span></span>(<span>risk_premium: float, gamble_size: float) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Convert a CARA risk premium to a risk-aversion coefficient.</p>
<p>Calculation follows Babcock (1993, Eq. 4).</p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="ruvpy" href="index.html">ruvpy</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="ruvpy.helpers.ecdf" href="#ruvpy.helpers.ecdf">ecdf</a></code></li>
<li><code><a title="ruvpy.helpers.generate_event_freq_ref" href="#ruvpy.helpers.generate_event_freq_ref">generate_event_freq_ref</a></code></li>
<li><code><a title="ruvpy.helpers.is_deterministic" href="#ruvpy.helpers.is_deterministic">is_deterministic</a></code></li>
<li><code><a title="ruvpy.helpers.nanmode" href="#ruvpy.helpers.nanmode">nanmode</a></code></li>
<li><code><a title="ruvpy.helpers.prob_premium_to_risk_aversion_coef" href="#ruvpy.helpers.prob_premium_to_risk_aversion_coef">prob_premium_to_risk_aversion_coef</a></code></li>
<li><code><a title="ruvpy.helpers.probabilistic_to_deterministic_forecast" href="#ruvpy.helpers.probabilistic_to_deterministic_forecast">probabilistic_to_deterministic_forecast</a></code></li>
<li><code><a title="ruvpy.helpers.risk_aversion_coef_to_risk_premium" href="#ruvpy.helpers.risk_aversion_coef_to_risk_premium">risk_aversion_coef_to_risk_premium</a></code></li>
<li><code><a title="ruvpy.helpers.risk_premium_to_prob_premium" href="#ruvpy.helpers.risk_premium_to_prob_premium">risk_premium_to_prob_premium</a></code></li>
<li><code><a title="ruvpy.helpers.risk_premium_to_risk_aversion_coef" href="#ruvpy.helpers.risk_premium_to_risk_aversion_coef">risk_premium_to_risk_aversion_coef</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.3</a>.</p>
</footer>
</body>
</html>
